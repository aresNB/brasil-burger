{% extends 'base.html.twig' %}

{% block title %}Gestion des menus
{% endblock %}
{% block page_title %}Gestion des menus
{% endblock %}

{% block body %}
	<!-- Bouton ajouter -->
	<div class="row mb-4">
		<div class="col-md-12">
			<a href="{{ path('app_menu_new') }}" class="btn btn-danger">
				<i class="bi bi-plus-circle"></i>
				Nouveau menu
			</a>
		</div>
	</div>

	<!-- Liste des menus -->
	<div class="row">
		{% if menus is empty %}
			<div class="col-md-12">
				<div class="card">
					<div class="card-body text-center py-5">
						<i class="bi bi-box-seam text-muted" style="font-size: 4rem;"></i>
						<h4 class="mt-3">Aucun menu</h4>
						<p class="text-muted">Cr√©ez votre premier menu pour commencer.</p>
						<a href="{{ path('app_menu_new') }}" class="btn btn-danger mt-3">
							<i class="bi bi-plus-circle"></i>
							Cr√©er un menu
						</a>
					</div>
				</div>
			</div>
		{% else %}
			{% for menu in menus %}
				<div class="col-md-4 mb-4">
					<div class="card h-100 {% if menu.isArchived %}border-secondary{% endif %}">
						{% if menu.imageUrl %}
							<img src="{{ menu.imageUrl }}" class="card-img-top" alt="{{ menu.libelle }}" style="height: 200px; object-fit: cover;">
						{% else %}
							<div class="bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
								<div class="text-center">
									<i class="bi bi-box-seam text-muted" style="font-size: 2rem;"></i>
									<p class="small text-muted mt-2">üçî + ü•§ + üçü</p>
								</div>
							</div>
						{% endif %}

						<div class="card-body">
							<div class="d-flex justify-content-between align-items-start mb-2">
								<h5 class="card-title mb-0">{{ menu.libelle }}</h5>
								{% if menu.isArchived %}
									<span class="badge bg-secondary">Archiv√©</span>
								{% else %}
									<span class="badge bg-success">Actif</span>
								{% endif %}
							</div>

							<div class="mb-3">
								<small class="text-muted">Composition :</small>
								<ul class="list-unstyled small">
									<li>
										<i class="bi bi-circle-fill text-danger"></i>
										{{ menu.burger.libelle }}</li>
									<li>
										<i class="bi bi-cup-straw text-info"></i>
										{{ menu.boisson.libelle }}</li>
									<li>
										<i class="bi bi-bag text-warning"></i>
										{{ menu.frite.libelle }}</li>
								</ul>
							</div>

							<h4 class="text-danger mb-3">{{ menu.prixTotal|number_format(0, ',', ' ') }}
								FCFA</h4>

							<div class="d-grid gap-2">
								<a href="{{ path('app_menu_edit', {id: menu.id}) }}" class="btn btn-primary btn-sm">
									<i class="bi bi-pencil"></i>
									Modifier
								</a>
								<form method="post" action="{{ path('app_menu_archive', {id: menu.id}) }}">
									<input type="hidden" name="_token" value="{{ csrf_token('archive_menu_' ~ menu.id) }}">
									<button type="submit" class="btn btn-outline-secondary btn-sm w-100">
										{% if menu.isArchived %}
											<i class="bi bi-arrow-counterclockwise"></i>
											D√©sarchiver
										{% else %}
											<i class="bi bi-archive"></i>
											Archiver
										{% endif %}
									</button>
								</form>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		{% endif %}
	</div>
{% endblock %}

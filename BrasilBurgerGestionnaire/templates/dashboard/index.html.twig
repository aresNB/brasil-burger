{% extends 'base.html.twig' %}

{% block title %}Tableau de bord - Brasil Burger
{% endblock %}

{% block page_title %}Tableau de bord
{% endblock %}

{% block body %}
	<div class="row mb-4">
		<div class="col-md-12">
			<h2 class="mb-3">Bienvenue,
				{{ app.user.prenom }}
				!</h2>
			<p class="text-muted">Voici un aperçu de l'activité du jour</p>
		</div>
	</div>

	<!-- Cartes de statistiques -->
	<div
		class="row g-4 mb-4">
		<!-- Commandes en cours -->
		<div class="col-md-3">
			<div class="card stat-card">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-start">
						<div>
							<p class="text-muted mb-1 small">Commandes en cours</p>
							<h3 class="mb-0">{{ statistiques.commandesEnCours }}</h3>
							<small class="text-muted">aujourd'hui</small>
						</div>
						<div class="stat-icon bg-warning bg-opacity-10 text-warning">
							<i class="bi bi-clock-history"></i>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Commandes validées -->
		<div class="col-md-3">
			<div class="card stat-card">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-start">
						<div>
							<p class="text-muted mb-1 small">Commandes validées</p>
							<h3 class="mb-0">{{ statistiques.commandesValidees }}</h3>
							<small class="text-muted">aujourd'hui</small>
						</div>
						<div class="stat-icon bg-success bg-opacity-10 text-success">
							<i class="bi bi-check-circle"></i>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Recettes journalières -->
		<div class="col-md-3">
			<div class="card stat-card">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-start">
						<div>
							<p class="text-muted mb-1 small">Recettes journalières</p>
							<h3 class="mb-0">{{ statistiques.recettesJournalieres|number_format(0, ',', ' ') }}</h3>
							<small class="text-muted">FCFA</small>
						</div>
						<div class="stat-icon bg-primary bg-opacity-10 text-primary">
							<i class="bi bi-currency-dollar"></i>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Commandes annulées -->
		<div class="col-md-3">
			<div class="card stat-card">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-start">
						<div>
							<p class="text-muted mb-1 small">Commandes annulées</p>
							<h3 class="mb-0">{{ statistiques.commandesAnnulees }}</h3>
							<small class="text-muted">aujourd'hui</small>
						</div>
						<div class="stat-icon bg-danger bg-opacity-10 text-danger">
							<i class="bi bi-x-circle"></i>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Produits les plus vendus -->
	<div class="row">
		<div class="col-md-12">
			<div class="card stat-card">
				<div class="card-header bg-white border-0 py-3">
					<h5 class="mb-0">
						<i class="bi bi-trophy text-warning"></i>
						Top 5 des produits les plus vendus
					</h5>
				</div>
				<div class="card-body">
					{% if statistiques.produitsLesPlusVendus is not empty %}
						<div class="table-responsive">
							<table class="table table-hover">
								<thead>
									<tr>
										<th>#</th>
										<th>Type</th>
										<th>Produit</th>
										<th class="text-end">Quantité vendue</th>
									</tr>
								</thead>
								<tbody>
									{% for index, produit in statistiques.produitsLesPlusVendus %}
										<tr>
											<td>
												{% if index == 0 %}
													<i class="bi bi-trophy-fill text-warning"></i>
												{% elseif index == 1 %}
													<i class="bi bi-trophy-fill text-secondary"></i>
												{% elseif index == 2 %}
													<i class="bi bi-trophy-fill text-bronze"></i>
												{% else %}
													{{ index + 1 }}
												{% endif %}
											</td>
											<td>
												{% if produit.typeProduit == 'BURGER' %}
													<span class="badge bg-danger">Burger</span>
												{% elseif produit.typeProduit == 'MENU' %}
													<span class="badge bg-success">Menu</span>
												{% else %}
													<span class="badge bg-info">Complément</span>
												{% endif %}
											</td>
											<td>
												{# Vous pouvez ajouter le nom du produit ici si nécessaire #}
												ID:
												{{ produit.burgerId ?? produit.menuId ?? 'N/A' }}
											</td>
											<td class="text-end">
												<strong>{{ produit.total }}</strong>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					{% else %}
						<div class="text-center py-5 text-muted">
							<i class="bi bi-inbox" style="font-size: 3rem;"></i>
							<p class="mt-3">Aucune vente aujourd'hui</p>
						</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
{% endblock %}
